/************************************************************************
Copyright (C) 2011 STMicroelectronics. All Rights Reserved.

This file is part of the stm_fe Library.

stm_fe is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License version 2 as published by the
Free Software Foundation.

stm_fe is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along
with stm_fe; see the file COPYING.  If not, write to the Free Software
Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.

The stm_fe Library may alternatively be licensed under a proprietary
license from ST.

Source file name : stv0367ofdm_init.c
Author :           LLA

367 lla drv file

Date        Modification                                    Name
----        ------------                                    --------
01-Aug-11   Created
04-Jul-12   Updated to v3.5
************************************************************************/
#ifndef ST_OSLINUX
/* #include <string.h> */
#endif
#include <linux/kernel.h>
#include <linux/list.h>
#include <linux/delay.h>
#include <linux/stm/demod.h>
#include <stfe_utilities.h>
#include <stm_fe_os.h>
#include <i2c_wrapper.h>
/* #include <globaldefs.h> */
#include "stv0367ofdm_init.h"
/* #include "stv0367ofdm_drv.h" */
/* values for STV4100 XTAL=30M int clk=53.125M*/
STCHIP_Register_t Def367Val[STV0367ofdm_NBREGS] = {
	{R367_ID, 0x60},
	{R367_I2CRPT, 0x22},
	{R367_TOPCTRL, 0x02},
	{R367_IOCFG0, 0x40},
	{R367_DAC0R, 0x00},
	{R367_IOCFG1, 0x00},
	{R367_DAC1R, 0x00},
	{R367_IOCFG2, 0x62},
	{R367_SDFR, 0x00},
	{R367ofdm_STATUS, 0xf8},
	{R367_AUX_CLK, 0x0a},
	{R367_FREESYS1, 0x00},
	{R367_FREESYS2, 0x00},
	{R367_FREESYS3, 0x00},
	{R367_GPIO_CFG, 0x55},
	{R367_GPIO_CMD, 0x00},
	{R367ofdm_AGC2MAX, 0xff},
	{R367ofdm_AGC2MIN, 0x00},
	{R367ofdm_AGC1MAX, 0xff},
	{R367ofdm_AGC1MIN, 0x00},
	{R367ofdm_AGCR, 0xbc},
	{R367ofdm_AGC2TH, 0x00},
	{R367ofdm_AGC12C, 0x00},
	{R367ofdm_AGCCTRL1, 0x85},
	{R367ofdm_AGCCTRL2, 0x1f},
	{R367ofdm_AGC1VAL1, 0x00},
	{R367ofdm_AGC1VAL2, 0x00},
	{R367ofdm_AGC2VAL1, 0x6f},
	{R367ofdm_AGC2VAL2, 0x05},
	{R367ofdm_AGC2PGA, 0x00},
	{R367ofdm_OVF_RATE1, 0x00},
	{R367ofdm_OVF_RATE2, 0x00},
	{R367ofdm_GAIN_SRC1, 0x2b},
	{R367ofdm_GAIN_SRC2, 0x04},
	{R367ofdm_INC_DEROT1, 0x55},
	{R367ofdm_INC_DEROT2, 0x55},
	{R367ofdm_PPM_CPAMP_DIR, 0x2c},
	{R367ofdm_PPM_CPAMP_INV, 0x00},
	{R367ofdm_FREESTFE_1, 0x00},
	{R367ofdm_FREESTFE_2, 0x1c},
	{R367ofdm_DCOFFSET, 0x00},
	{R367ofdm_EN_PROCESS, 0x05},
	{R367ofdm_SDI_SMOOTHER, 0x80},
	{R367ofdm_FE_LOOP_OPEN, 0x1c},
	{R367ofdm_FREQOFF1, 0x00},
	{R367ofdm_FREQOFF2, 0x00},
	{R367ofdm_FREQOFF3, 0x00},
	{R367ofdm_TIMOFF1, 0x00},
	{R367ofdm_TIMOFF2, 0x00},
	{R367ofdm_EPQ, 0x02},
	{R367ofdm_EPQAUTO, 0x01},
	{R367ofdm_SYR_UPDATE, 0xf5},
	{R367ofdm_CHPFREE, 0x00},
	{R367ofdm_PPM_STATE_MAC, 0x23},
	{R367ofdm_INR_THRESHOLD, 0xff},
	{R367ofdm_EPQ_TPS_ID_CELL, 0xf9},
	{R367ofdm_EPQ_CFG, 0x00},
	{R367ofdm_EPQ_STATUS, 0x01},
	{R367ofdm_AUTORELOCK, 0x81},
	{R367ofdm_BER_THR_VMSB, 0x00},
	{R367ofdm_BER_THR_MSB, 0x00},
	{R367ofdm_BER_THR_LSB, 0x00},
	{R367ofdm_CCD, 0x83},
	{R367ofdm_SPECTR_CFG, 0x00},
	{R367ofdm_CHC_DUMMY, 0x18},
	{R367ofdm_INC_CTL, 0x88},
	{R367ofdm_INCTHRES_COR1, 0xb4},
	{R367ofdm_INCTHRES_COR2, 0x96},
	{R367ofdm_INCTHRES_DET1, 0x0e},
	{R367ofdm_INCTHRES_DET2, 0x11},
	{R367ofdm_IIR_CELLNB, 0x8d},
	{R367ofdm_IIRCX_COEFF1_MSB, 0x00},
	{R367ofdm_IIRCX_COEFF1_LSB, 0x00},
	{R367ofdm_IIRCX_COEFF2_MSB, 0x09},
	{R367ofdm_IIRCX_COEFF2_LSB, 0x18},
	{R367ofdm_IIRCX_COEFF3_MSB, 0x14},
	{R367ofdm_IIRCX_COEFF3_LSB, 0x9c},
	{R367ofdm_IIRCX_COEFF4_MSB, 0x00},
	{R367ofdm_IIRCX_COEFF4_LSB, 0x00},
	{R367ofdm_IIRCX_COEFF5_MSB, 0x36},
	{R367ofdm_IIRCX_COEFF5_LSB, 0x42},
	{R367ofdm_FEPATH_CFG, 0x00},
	{R367ofdm_PMC1_FUNC, 0x65},
	{R367ofdm_PMC1_FOR, 0x00},
	{R367ofdm_PMC2_FUNC, 0x00},
	{R367ofdm_STATUS_ERR_DA, 0xe0},
	{R367ofdm_DIG_AGC_R, 0xfa},
	{R367ofdm_COMAGC_TARMSB, 0x0b},
	{R367ofdm_COM_AGC_TAR_ENMODE, 0x41},
	{R367ofdm_COM_AGC_CFG, 0x3e},
	{R367ofdm_COM_AGC_GAIN1, 0x39},
	{R367ofdm_AUT_AGC_TARGETMSB, 0x0b},
	{R367ofdm_LOCK_DET_MSB, 0x01},
	{R367ofdm_AGCTAR_LOCK_LSBS, 0x40},
	{R367ofdm_AUT_GAIN_EN, 0xf4},
	{R367ofdm_AUT_CFG, 0xf0},
	{R367ofdm_LOCKN, 0x23},
	{R367ofdm_INT_X_3, 0x00},
	{R367ofdm_INT_X_2, 0x03},
	{R367ofdm_INT_X_1, 0x8d},
	{R367ofdm_INT_X_0, 0xa0},
	{R367ofdm_MIN_ERRX_MSB, 0x00},
	{R367ofdm_COR_CTL, 0x23},
	{R367ofdm_COR_STAT, 0xf6},
	{R367ofdm_COR_INTEN, 0x00},
	{R367ofdm_COR_INTSTAT, 0x3f},
	{R367ofdm_COR_MODEGUARD, 0x03},
	{R367ofdm_AGC_CTL, 0x00},
	{R367ofdm_AGC_MANUAL1, 0x00},
	{R367ofdm_AGC_MANUAL2, 0x00},
	{R367ofdm_AGC_TARG, 0x16},
	{R367ofdm_AGC_GAIN1, 0x53},
	{R367ofdm_AGC_GAIN2, 0x1d},
	{R367ofdm_RESERVED_1, 0x00},
	{R367ofdm_RESERVED_2, 0x00},
	{R367ofdm_RESERVED_3, 0x00},
	{R367ofdm_CAS_CTL, 0x44},
	{R367ofdm_CAS_FREQ, 0xb3},
	{R367ofdm_CAS_DAGCGAIN, 0x12},
	{R367ofdm_SYR_CTL, 0x04},
	{R367ofdm_SYR_STAT, 0x10},
	{R367ofdm_SYR_NCO1, 0x00},
	{R367ofdm_SYR_NCO2, 0x00},
	{R367ofdm_SYR_OFFSET1, 0x00},
	{R367ofdm_SYR_OFFSET2, 0x00},
	{R367ofdm_FFT_CTL, 0x00},
	{R367ofdm_SCR_CTL, 0x70},
	{R367ofdm_PPM_CTL1, 0xf8},
	{R367ofdm_TRL_CTL, 0xac},
	{R367ofdm_TRL_NOMRATE1, 0x1e},
	{R367ofdm_TRL_NOMRATE2, 0x58},
	{R367ofdm_TRL_TIME1, 0x1d},
	{R367ofdm_TRL_TIME2, 0xfc},
	{R367ofdm_CRL_CTL, 0x24},
	{R367ofdm_CRL_FREQ1, 0xad},
	{R367ofdm_CRL_FREQ2, 0x9d},
	{R367ofdm_CRL_FREQ3, 0xff},
	{R367ofdm_CHC_CTL, 0x01},
	{R367ofdm_CHC_SNR, 0xf0},
	{R367ofdm_BDI_CTL, 0x00},
	{R367ofdm_DMP_CTL, 0x00},
	{R367ofdm_TPS_RCVD1, 0x30},
	{R367ofdm_TPS_RCVD2, 0x02},
	{R367ofdm_TPS_RCVD3, 0x01},
	{R367ofdm_TPS_RCVD4, 0x00},
	{R367ofdm_TPS_ID_CELL1, 0x00},
	{R367ofdm_TPS_ID_CELL2, 0x00},
	{R367ofdm_TPS_RCVD5_SET1, 0x02},
	{R367ofdm_TPS_SET2, 0x02},
	{R367ofdm_TPS_SET3, 0x01},
	{R367ofdm_TPS_CTL, 0x02},
	{R367ofdm_CTL_FFTOSNUM, 0x34},
	{R367ofdm_TESTSELECT, 0x09},
	{R367ofdm_MSC_REV, 0x0a},
	{R367ofdm_PIR_CTL, 0x00},
	{R367ofdm_SNR_CARRIER1, 0xa1},
	{R367ofdm_SNR_CARRIER2, 0x9a},
	{R367ofdm_PPM_CPAMP, 0x2c},
	{R367ofdm_TSM_AP0, 0x00},
	{R367ofdm_TSM_AP1, 0x00},
	{R367ofdm_TSM_AP2, 0x00},
	{R367ofdm_TSM_AP3, 0x00},
	{R367ofdm_TSM_AP4, 0x00},
	{R367ofdm_TSM_AP5, 0x00},
	{R367ofdm_TSM_AP6, 0x00},
	{R367ofdm_TSM_AP7, 0x00},
	{R367_TSTRES, 0x00},
	/*caution PLL stopped, to be restarted at init!!! */
	{R367_ANACTRL, 0x0D},
	{R367_TSTBUS, 0x00},
	{R367ofdm_TSTRATE, 0x00},
	{R367ofdm_CONSTMODE, 0x01},
	{R367ofdm_CONSTCARR1, 0x00},
	{R367ofdm_CONSTCARR2, 0x00},
	{R367ofdm_ICONSTEL, 0x0a},
	{R367ofdm_QCONSTEL, 0x15},
	{R367ofdm_TSTBISTRES0, 0x00},
	{R367ofdm_TSTBISTRES1, 0x00},
	{R367ofdm_TSTBISTRES2, 0x28},
	{R367ofdm_TSTBISTRES3, 0x00},
	{R367_RF_AGC1, 0xff},
	{R367_RF_AGC2, 0x83},
	{R367_ANADIGCTRL, 0x19},
	{R367_PLLMDIV, 0x0c},
	{R367_PLLNDIV, 0x55},
	{R367_PLLSETUP, 0x18},
	{R367_DUAL_AD12, 0x00},
	{R367_TSTBIST, 0x00},
	{R367ofdm_PAD_COMP_CTRL, 0x00},
	{R367ofdm_PAD_COMP_WR, 0x00},
	{R367ofdm_PAD_COMP_RD, 0xe0},
	{R367ofdm_SYR_TARGET_FFTADJT_MSB, 0x00},
	{R367ofdm_SYR_TARGET_FFTADJT_LSB, 0x00},
	{R367ofdm_SYR_TARGET_CHCADJT_MSB, 0x00},
	{R367ofdm_SYR_TARGET_CHCADJT_LSB, 0x00},
	{R367ofdm_SYR_FLAG, 0x00},
	{R367ofdm_CRL_TARGET1, 0x00},
	{R367ofdm_CRL_TARGET2, 0x00},
	{R367ofdm_CRL_TARGET3, 0x00},
	{R367ofdm_CRL_TARGET4, 0x00},
	{R367ofdm_CRL_FLAG, 0x00},
	{R367ofdm_TRL_TARGET1, 0x00},
	{R367ofdm_TRL_TARGET2, 0x00},
	{R367ofdm_TRL_CHC, 0x00},
	{R367ofdm_CHC_SNR_TARG, 0x00},
	{R367ofdm_TOP_TRACK, 0x00},
	{R367ofdm_TRACKER_FREE1, 0x00},
	{R367ofdm_ERROR_CRL1, 0x00},
	{R367ofdm_ERROR_CRL2, 0x00},
	{R367ofdm_ERROR_CRL3, 0x00},
	{R367ofdm_ERROR_CRL4, 0x00},
	{R367ofdm_DEC_NCO1, 0x2c},
	{R367ofdm_DEC_NCO2, 0x0f},
	{R367ofdm_DEC_NCO3, 0x20},
	{R367ofdm_SNR, 0xf1},
	{R367ofdm_SYR_FFTADJ1, 0x00},
	{R367ofdm_SYR_FFTADJ2, 0x00},
	{R367ofdm_SYR_CHCADJ1, 0x00},
	{R367ofdm_SYR_CHCADJ2, 0x00},
	{R367ofdm_SYR_OFF, 0x00},
	{R367ofdm_PPM_OFFSET1, 0x00},
	{R367ofdm_PPM_OFFSET2, 0x03},
	{R367ofdm_TRACKER_FREE2, 0x00},
	{R367ofdm_DEBG_LT10, 0x00},
	{R367ofdm_DEBG_LT11, 0x00},
	{R367ofdm_DEBG_LT12, 0x00},
	{R367ofdm_DEBG_LT13, 0x00},
	{R367ofdm_DEBG_LT14, 0x00},
	{R367ofdm_DEBG_LT15, 0x00},
	{R367ofdm_DEBG_LT16, 0x00},
	{R367ofdm_DEBG_LT17, 0x00},
	{R367ofdm_DEBG_LT18, 0x00},
	{R367ofdm_DEBG_LT19, 0x00},
	{R367ofdm_DEBG_LT1A, 0x00},
	{R367ofdm_DEBG_LT1B, 0x00},
	{R367ofdm_DEBG_LT1C, 0x00},
	{R367ofdm_DEBG_LT1D, 0x00},
	{R367ofdm_DEBG_LT1E, 0x00},
	{R367ofdm_DEBG_LT1F, 0x00},
	{R367ofdm_RCCFGH, 0x00},
	{R367ofdm_RCCFGM, 0x00},
	{R367ofdm_RCCFGL, 0x00},
	{R367ofdm_RCINSDELH, 0x00},
	{R367ofdm_RCINSDELM, 0x00},
	{R367ofdm_RCINSDELL, 0x00},
	{R367ofdm_RCSTATUS, 0x00},
	{R367ofdm_RCSPEED, 0x6f},
	{R367ofdm_RCDEBUGM, 0xe7},
	{R367ofdm_RCDEBUGL, 0x9b},
	{R367ofdm_RCOBSCFG, 0x00},
	{R367ofdm_RCOBSM, 0x00},
	{R367ofdm_RCOBSL, 0x00},
	{R367ofdm_RCFECSPY, 0x00},
	{R367ofdm_RCFSPYCFG, 0x00},
	{R367ofdm_RCFSPYDATA, 0x00},
	{R367ofdm_RCFSPYOUT, 0x00},
	{R367ofdm_RCFSTATUS, 0x00},
	{R367ofdm_RCFGOODPACK, 0x00},
	{R367ofdm_RCFPACKCNT, 0x00},
	{R367ofdm_RCFSPYMISC, 0x00},
	{R367ofdm_RCFBERCPT4, 0x00},
	{R367ofdm_RCFBERCPT3, 0x00},
	{R367ofdm_RCFBERCPT2, 0x00},
	{R367ofdm_RCFBERCPT1, 0x00},
	{R367ofdm_RCFBERCPT0, 0x00},
	{R367ofdm_RCFBERERR2, 0x00},
	{R367ofdm_RCFBERERR1, 0x00},
	{R367ofdm_RCFBERERR0, 0x00},
	{R367ofdm_RCFSTATESM, 0x00},
	{R367ofdm_RCFSTATESL, 0x00},
	{R367ofdm_RCFSPYBER, 0x00},
	{R367ofdm_RCFSPYDISTM, 0x00},
	{R367ofdm_RCFSPYDISTL, 0x00},
	{R367ofdm_RCFSPYOBS7, 0x00},
	{R367ofdm_RCFSPYOBS6, 0x00},
	{R367ofdm_RCFSPYOBS5, 0x00},
	{R367ofdm_RCFSPYOBS4, 0x00},
	{R367ofdm_RCFSPYOBS3, 0x00},
	{R367ofdm_RCFSPYOBS2, 0x00},
	{R367ofdm_RCFSPYOBS1, 0x00},
	{R367ofdm_RCFSPYOBS0, 0x00},
	{R367ofdm_TSGENERAL, 0x00},
	{R367ofdm_RC1SPEED, 0x6f},
	{R367ofdm_TSGSTATUS, 0x18},
	{R367ofdm_FECM, 0x01},
	{R367ofdm_VTH12, 0xff},
	{R367ofdm_VTH23, 0xa1},
	{R367ofdm_VTH34, 0x64},
	{R367ofdm_VTH56, 0x40},
	{R367ofdm_VTH67, 0x00},
	{R367ofdm_VTH78, 0x2c},
	{R367ofdm_VITCURPUN, 0x12},
	{R367ofdm_VERROR, 0x01},
	{R367ofdm_PRVIT, 0x3f},
	{R367ofdm_VAVSRVIT, 0x00},
	{R367ofdm_VSTATUSVIT, 0xbd},
	{R367ofdm_VTHINUSE, 0xa1},
	{R367ofdm_KDIV12, 0x20},
	{R367ofdm_KDIV23, 0x40},
	{R367ofdm_KDIV34, 0x20},
	{R367ofdm_KDIV56, 0x30},
	{R367ofdm_KDIV67, 0x00},
	{R367ofdm_KDIV78, 0x30},
	{R367ofdm_SIGPOWER, 0x54},
	{R367ofdm_DEMAPVIT, 0x40},
	{R367ofdm_VITSCALE, 0x00},
	{R367ofdm_FFEC1PRG, 0x00},
	{R367ofdm_FVITCURPUN, 0x12},
	{R367ofdm_FVERROR, 0x01},
	{R367ofdm_FVSTATUSVIT, 0xbd},
	{R367ofdm_DEBUG_LT1, 0x00},
	{R367ofdm_DEBUG_LT2, 0x00},
	{R367ofdm_DEBUG_LT3, 0x00},
	{R367ofdm_TSTSFMET, 0x00},
	{R367ofdm_SELOUT, 0x00},
	{R367ofdm_TSYNC, 0x00},
	{R367ofdm_TSTERR, 0x00},
	{R367ofdm_TSFSYNC, 0x00},
	{R367ofdm_TSTSFERR, 0x00},
	{R367ofdm_TSTTSSF1, 0x01},
	{R367ofdm_TSTTSSF2, 0x1f},
	{R367ofdm_TSTTSSF3, 0x00},
	{R367ofdm_TSTTS1, 0x00},
	{R367ofdm_TSTTS2, 0x1f},
	{R367ofdm_TSTTS3, 0x01},
	{R367ofdm_TSTTS4, 0x00},
	{R367ofdm_TSTTSRC, 0x00},
	{R367ofdm_TSTTSRS, 0x00},
	{R367ofdm_TSSTATEM, 0xb0},
	{R367ofdm_TSSTATEL, 0x40},
	{R367ofdm_TSCFGH, 0x80},
	{R367ofdm_TSCFGM, 0x00},
	{R367ofdm_TSCFGL, 0x20},
	{R367ofdm_TSSYNC, 0x00},
	{R367ofdm_TSINSDELH, 0x00},
	{R367ofdm_TSINSDELM, 0x00},
	{R367ofdm_TSINSDELL, 0x00},
	{R367ofdm_TSDIVN, 0x03},
	{R367ofdm_TSDIVPM, 0x00},
	{R367ofdm_TSDIVPL, 0x00},
	{R367ofdm_TSDIVQM, 0x00},
	{R367ofdm_TSDIVQL, 0x00},
	{R367ofdm_TSDILSTKM, 0x00},
	{R367ofdm_TSDILSTKL, 0x00},
	{R367ofdm_TSSPEED, 0x6f},
	{R367ofdm_TSSTATUS, 0x81},
	{R367ofdm_TSSTATUS2, 0x6a},
	{R367ofdm_TSBITRATEM, 0x0f},
	{R367ofdm_TSBITRATEL, 0xc6},
	{R367ofdm_TSPACKLENM, 0x00},
	{R367ofdm_TSPACKLENL, 0xfc},
	{R367ofdm_TSBLOCLENM, 0x0a},
	{R367ofdm_TSBLOCLENL, 0x80},
	{R367ofdm_TSDLYH, 0x90},
	{R367ofdm_TSDLYM, 0x68},
	{R367ofdm_TSDLYL, 0x01},
	{R367ofdm_TSNPDAV, 0x00},
	{R367ofdm_TSBUFSTATH, 0x00},
	{R367ofdm_TSBUFSTATM, 0x00},
	{R367ofdm_TSBUFSTATL, 0x00},
	{R367ofdm_TSDEBUGM, 0xcf},
	{R367ofdm_TSDEBUGL, 0x1e},
	{R367ofdm_TSDLYSETH, 0x00},
	{R367ofdm_TSDLYSETM, 0x68},
	{R367ofdm_TSDLYSETL, 0x00},
	{R367ofdm_TSOBSCFG, 0x00},
	{R367ofdm_TSOBSM, 0x47},
	{R367ofdm_TSOBSL, 0x1f},
	{R367ofdm_ERRCTRL1, 0x95},
	{R367ofdm_ERRCNT1H, 0x80},
	{R367ofdm_ERRCNT1M, 0x00},
	{R367ofdm_ERRCNT1L, 0x00},
	{R367ofdm_ERRCTRL2, 0x95},
	{R367ofdm_ERRCNT2H, 0x00},
	{R367ofdm_ERRCNT2M, 0x00},
	{R367ofdm_ERRCNT2L, 0x00},
	{R367ofdm_FECSPY, 0x88},
	{R367ofdm_FSPYCFG, 0x2c},
	{R367ofdm_FSPYDATA, 0x3a},
	{R367ofdm_FSPYOUT, 0x06},
	{R367ofdm_FSTATUS, 0x61},
	{R367ofdm_FGOODPACK, 0xff},
	{R367ofdm_FPACKCNT, 0xff},
	{R367ofdm_FSPYMISC, 0x66},
	{R367ofdm_FBERCPT4, 0x00},
	{R367ofdm_FBERCPT3, 0x00},
	{R367ofdm_FBERCPT2, 0x36},
	{R367ofdm_FBERCPT1, 0x36},
	{R367ofdm_FBERCPT0, 0x14},
	{R367ofdm_FBERERR2, 0x00},
	{R367ofdm_FBERERR1, 0x03},
	{R367ofdm_FBERERR0, 0x28},
	{R367ofdm_FSTATESM, 0x00},
	{R367ofdm_FSTATESL, 0x02},
	{R367ofdm_FSPYBER, 0x00},
	{R367ofdm_FSPYDISTM, 0x01},
	{R367ofdm_FSPYDISTL, 0x9f},
	{R367ofdm_FSPYOBS7, 0xc9},
	{R367ofdm_FSPYOBS6, 0x99},
	{R367ofdm_FSPYOBS5, 0x08},
	{R367ofdm_FSPYOBS4, 0xec},
	{R367ofdm_FSPYOBS3, 0x01},
	{R367ofdm_FSPYOBS2, 0x0f},
	{R367ofdm_FSPYOBS1, 0xf5},
	{R367ofdm_FSPYOBS0, 0x08},
	{R367ofdm_SFDEMAP, 0x40},
	{R367ofdm_SFERROR, 0x00},
	{R367ofdm_SFAVSR, 0x30},
	{R367ofdm_SFECSTATUS, 0xcc},
	{R367ofdm_SFKDIV12, 0x20},
	{R367ofdm_SFKDIV23, 0x40},
	{R367ofdm_SFKDIV34, 0x20},
	{R367ofdm_SFKDIV56, 0x20},
	{R367ofdm_SFKDIV67, 0x00},
	{R367ofdm_SFKDIV78, 0x20},
	{R367ofdm_SFDILSTKM, 0x00},
	{R367ofdm_SFDILSTKL, 0x00},
	{R367ofdm_SFSTATUS, 0xb5},
	{R367ofdm_SFDLYH, 0x90},
	{R367ofdm_SFDLYM, 0x60},
	{R367ofdm_SFDLYL, 0x01},
	{R367ofdm_SFDLYSETH, 0xc0},
	{R367ofdm_SFDLYSETM, 0x60},
	{R367ofdm_SFDLYSETL, 0x00},
	{R367ofdm_SFOBSCFG, 0x00},
	{R367ofdm_SFOBSM, 0x47},
	{R367ofdm_SFOBSL, 0x05},
	{R367ofdm_SFECINFO, 0x40},
	{R367ofdm_SFERRCTRL, 0x74},
	{R367ofdm_SFERRCNTH, 0x80},
	{R367ofdm_SFERRCNTM, 0x00},
	{R367ofdm_SFERRCNTL, 0x00},
	{R367ofdm_SYMBRATEM, 0x2f},
	{R367ofdm_SYMBRATEL, 0x50},
	{R367ofdm_SYMBSTATUS, 0x7f},
	{R367ofdm_SYMBCFG, 0x00},
	{R367ofdm_SYMBFIFOM, 0xf4},
	{R367ofdm_SYMBFIFOL, 0x0d},
	{R367ofdm_SYMBOFFSM, 0xf0},
	{R367ofdm_SYMBOFFSL, 0x2d},
	{R367ofdm_DEBUG_LT4, 0x00},
	{R367ofdm_DEBUG_LT5, 0x00},
	{R367ofdm_DEBUG_LT6, 0x00},
	{R367ofdm_DEBUG_LT7, 0x00},
	{R367ofdm_DEBUG_LT8, 0x00},
	{R367ofdm_DEBUG_LT9, 0x00},
};

STCHIP_Error_t STV0367ofdm_Init(Demod_InitParams_t *InitParams,
				STCHIP_Handle_t *hChipHandle)
{
	STCHIP_Handle_t hChip;
	STCHIP_Error_t error;
	U16 i;

	/* Fill elements of external chip data structure */
	InitParams->Chip->NbRegs = STV0367ofdm_NBREGS;
	InitParams->Chip->NbFields = STV0367ofdm_NBFIELDS;
	InitParams->Chip->ChipMode = STCHIP_MODE_SUBADR_16;
	/*InitParams->Chip->RepeaterFn = NULL; *//*db Fn already set before */
	InitParams->Chip->pData = NULL;

#ifdef HOST_PC
	(*hChipHandle) = ChipOpen(InitParams->Chip);
#endif
	hChip = (*hChipHandle);

	if (hChip != NULL) {
		/*******************************
		**   REGISTERS CONFIGURATION
		**     ----------------------
		********************************/
		ChipUpdateDefaultValues(hChip, Def367Val);

		/*Read id register to check i2c error */
		ChipGetRegisters(hChip, R367_ID, 1);
		if (hChip->Error == CHIPERR_NO_ERROR) {

			for (i = 0; i < STV0367ofdm_NBREGS; i++)
				ChipSetOneRegister(hChip, Def367Val[i].Addr,
						   Def367Val[i].Value);
		}

		error = hChip->Error;
	} else
		error = CHIPERR_INVALID_HANDLE;
	return error;
}
